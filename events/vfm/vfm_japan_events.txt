namespace = vfm_jap_monarchy

#Emperor Accession Events

vfm_jap_monarchy.1 = { #Accession of Komei
	type = country_event
	placement = root

	title = vfm_jap_monarchy.1.t
	desc = vfm_jap_monarchy.1.d
	flavor = vfm_jap_monarchy.1.f

	gui_window = event_window_1char_tabloid
	
	left_icon = scope:emperor_scope

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/law_icons/monarchy.dds"

	duration = 3

	cooldown = { months = stupidly_long_modifier_time }

	trigger = {
		#Fired by on_action
	}

	immediate = {
		ruler = {
			save_scope_as = emperor_scope
		}
		root = {
			save_scope_as = japan_scope
		}
	}

	option = {
		name = vfm_jap_monarchy.1.a
		default_option = yes
		show_as_tooltip = {
			scope:emperor_scope = {
				set_character_as_ruler = yes
			}
		}
		custom_tooltip = {
			text = komei_enthroned_tt
		}
		hidden_effect = {
			if = {
				limit = {
					game_date >= 1852.11.3
				}
				create_character = {
					template = jap_meiji_yamato_template
					heir = yes
				}
			}
		}
		#ruler = {
		#	add_modifier = {
		#		name = modifier_alexander_ii
		#		months = very_long_modifier_time
		#	}
		#}
	}
}

vfm_jap_monarchy.2 = { #Accession of Meiji
	type = country_event
	placement = root

	title = vfm_jap_monarchy.2.t
	desc = vfm_jap_monarchy.2.d
	flavor = vfm_jap_monarchy.2.f

	gui_window = event_window_1char_tabloid
	
	left_icon = scope:emperor_scope

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/law_icons/monarchy.dds"

	duration = 3

	cooldown = { months = stupidly_long_modifier_time }

	trigger = {
		#Fired by on_action
	}

	immediate = {
		ruler = {
			save_scope_as = emperor_scope
		}
		root = {
			save_scope_as = japan_scope
		}
	}

	option = {
		name = vfm_jap_monarchy.2.a
		default_option = yes
		show_as_tooltip = {
			scope:emperor_scope = {
				set_character_as_ruler = yes
			}
		}
		custom_tooltip = {
			text = meiji_enthroned_tt
		}
		#ruler = {
		#	add_modifier = {
		#		name = modifier_alexander_iii
		#		months = very_long_modifier_time
		#	}
		#}
		hidden_effect = {
			if = {
				limit = {
					game_date >= 1879.9.31
				}
				create_character = {
					#Emperor Taisho
					template = jap_taisho_yamato_template
					heir = yes
				}
			}
		}
	}
}

vfm_jap_monarchy.3 = { #Accession of Taisho
	type = country_event
	placement = root

	title = vfm_jap_monarchy.3.t
	desc = vfm_jap_monarchy.3.d
	flavor = vfm_jap_monarchy.3.f

	gui_window = event_window_1char_tabloid
	
	left_icon = scope:emperor_scope

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/law_icons/monarchy.dds"

	duration = 3

	cooldown = { months = stupidly_long_modifier_time }

	trigger = {
		#Fired by on_action
	}

	immediate = {
		ruler = {
			save_scope_as = emperor_scope
		}
	}

	option = {
		name = vfm_jap_monarchy.3.a
		default_option = yes
		show_as_tooltip = {
			scope:emperor_scope = {
				set_character_as_ruler = yes
			}
		}
		ruler = {
			add_modifier = {
				name = modifier_nicholas_ii
				months = very_long_modifier_time
			}
		}
		hidden_effect = {
			if = {
				limit = {
					game_date >= 1901.4.29
				}
				create_character = {
					template = jap_showa_yamato_template
					heir = yes
				}
			}
		}
	}
}

vfm_jap_monarchy.4 = { #Accession of Showa (Hirohito)
	type = country_event
	placement = root

	title = vfm_jap_monarchy.4.t
	desc = vfm_jap_monarchy.4.d
	flavor = vfm_jap_monarchy.4.f

	gui_window = event_window_1char_tabloid
	
	left_icon = scope:emperor_scope

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/law_icons/monarchy.dds"

	duration = 3

	cooldown = { months = stupidly_long_modifier_time }

	trigger = {
		#Fired by on_action
	}

	immediate = {
		ruler = {
			save_scope_as = emperor_scope
		}
	}

	option = {
		name = vfm_jap_monarchy.4.a
		default_option = yes
		show_as_tooltip = {
			scope:emperor_scope = {
				set_character_as_ruler = yes
			}
		}
		#ruler = {
		#	add_modifier = {
		#		name = modifier_nicholas_ii
		#		months = very_long_modifier_time
		#	}
		#}
	}
}


# Emperor Birth Events

vfm_jap_monarchy.5 = { #Birth of Meiji
	type = country_event
	placement = root

	title = vfm_jap_monarchy.5.t
	desc = vfm_jap_monarchy.5.d
	flavor = vfm_jap_monarchy.5.f

	event_image = {
		video = "europenorthamerica_london_center"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	duration = 3

	cooldown = { months = stupidly_long_modifier_time }

	trigger = {
		c:JAP ?= this
		ruler = {
			has_template = jap_komei_yamato_template
		}
		game_date >= 1852.11.3
	}

	immediate = {
		create_character = {
			template = jap_meiji_yamato_template
			heir = yes
		}
		ruler = {
			save_scope_as = komei_scope
		}
		heir = {
			save_scope_as = meiji_scope
		}
		root = {
			save_scope_as = jap_scope
		}
	}

	option = {
		name = vfm_jap_monarchy.5.a
		default_option = yes
		custom_tooltip = {
			text = meiji_becomes_heir_tt
		}
	}
}

vfm_jap_monarchy.6 = { #Birth of Taisho
	type = country_event
	placement = root

	title = vfm_jap_monarchy.6.t
	desc = vfm_jap_monarchy.6.d
	flavor = vfm_jap_monarchy.6.f

	event_image = {
		video = "europenorthamerica_london_center"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_portrait.dds"

	duration = 3

	cooldown = { months = stupidly_long_modifier_time }

	trigger = {
		c:JAP ?= this
		ruler = {
			has_template = jap_meiji_yamato_template
		}
		game_date >= 1879.9.31
	}

	immediate = {
		create_character = {
			template = jap_taisho_yamato_template
			heir = yes
		}
		ruler = {
			save_scope_as = meiji_scope
		}
		heir = {
			save_scope_as = taisho_scope
		}
		root = {
			save_scope_as = jap_scope
		}
	}

	option = {
		name = vfm_jap_monarchy.6.a
		default_option = yes
		custom_tooltip = {
			text = taisho_becomes_heir_tt
		}
	}
}

#Emperor Death Events

vfm_jap_monarchy.7 = { #Death of Ninko
	type = country_event
	placement = root

	title = vfm_jap_monarchy.7.t
	desc = vfm_jap_monarchy.7.d
	flavor = vfm_jap_monarchy.7.f

	gui_window = event_window_1char_tabloid
	
	left_icon = scope:ninko_scope

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	duration = 3

	cooldown = { months = stupidly_long_modifier_time }

	trigger = {
		c:JAP ?= this
		ruler ?= {
			has_template = jap_ninko_yamato_template
		}
		game_date >= 1846.2.21
	}

	immediate = {
		random_scope_character = {
			limit = {
				has_template = jap_ninko_yamato_template
			}
			save_scope_as = ninko_scope
		}
	}

	option = {
		name = vfm_jap_monarchy.7.a
		default_option = yes
		scope:ninko_scope = {
			kill_character = yes
		}
	}
	
	option = {
		name = vfm_jap_monarchy.7.b
		trigger = {
			has_technology_researched = modern_nursing
		}
		highlighted_option = yes
		custom_tooltip = {
			text = ninko_lives_tt
		}
	}
}

vfm_jap_monarchy.8 = { #Death of Komei
	type = country_event
	placement = root

	title = vfm_jap_monarchy.8.t
	desc = vfm_jap_monarchy.8.d
	flavor = vfm_jap_monarchy.8.f

	gui_window = event_window_1char_tabloid
	
	left_icon = scope:komei_scope

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	duration = 3

	cooldown = { months = stupidly_long_modifier_time }

	trigger = {
		c:JAP ?= this
		ruler ?= {
			has_template = jap_komei_yamato_template
		}
		game_date >= 1867.1.30
	}

	immediate = {
		random_scope_character = {
			limit = {
				has_template = jap_komei_yamato_template
			}
			save_scope_as = komei_scope
		}
	}

	option = {
		name = vfm_jap_monarchy.8.a
		default_option = yes
		scope:komei_scope = {
			kill_character = yes
		}
	}
	
	option = {
		name = vfm_jap_monarchy.8.b
		trigger = {
			has_technology_researched = modern_nursing
		}
		highlighted_option = yes
		custom_tooltip = {
			text = komei_lives_tt
		}
	}
}