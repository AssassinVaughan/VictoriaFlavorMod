je_switzerland_constitution = {
	icon = "gfx/interface/icons/event_icons/event_swi_coa.dds"
    group = je_group_internal_affairs

	scripted_progress_bar = swiss_confederation_progress_bar

	can_deactivate = yes
	
	scripted_button = je_swiss_conservative_button
	scripted_button = je_swiss_confederate_button

	complete = {
		OR = {
			custom_tooltip = {
				text = je_swiss_constitution_complete_tt
				scope:journal_entry = {
					"scripted_bar_progress(swiss_confederation_progress_bar)" <= 50
				}
			}
			has_law = law_type:law_federal
		}
	}
	
	fail = {
		OR = {
			custom_tooltip = {
				text = je_swiss_constitution_fail_tt
				scope:journal_entry = {
					"scripted_bar_progress(swiss_confederation_progress_bar)" >= 350
				}
			}
			has_law = law_type:law_decentralized
		}
	}
	
	invalid = {
		OR = {
			has_law = law_type:law_devolved
			has_law = law_type:law_unitary
			has_law = law_type:law_monarchy
			has_law = law_type:law_theocracy
		}
	}

	on_complete = { # Progressives proclaim federal switzerland
		trigger_event = { id = journal_flavor_switzerland.1 }
		hidden_effect = { 
			if = {
				limit = {
					NOT = { has_law = law_type:law_federal }
				}
				activate_law = law_type:law_federal
			}
		}
	}
	
	on_timeout = { # sonderbund separate alliance forming?
		trigger_event = { id = journal_flavor_switzerland.2 }
		hidden_effect = { 
			if = {
				limit = {
					NOT = { has_law = law_type:law_federal }
				}
				activate_law = law_type:law_federal
			}
		}
	}

	on_fail = {  # Conservatives roll back reforms
		trigger_event = { id = journal_flavor_switzerland.3 }
	}

	timeout = 4400

	status_desc = {
        first_valid = {
            triggered_desc = {
                desc = je_swiss_constitution_conservative_advantage
                trigger = {
                    scope:journal_entry = {
						"scripted_bar_progress(swiss_confederation_progress_bar)" >= 200
					}
                }
            }
            triggered_desc = {
                desc = je_swiss_constitution_confederate_advantage
                trigger = {
                    scope:journal_entry = {
						"scripted_bar_progress(swiss_confederation_progress_bar)" <= 200
					}
                }
            }
        }
    }

    should_be_pinned_by_default = yes
	weight = 20
}

je_sonderbund_war = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
    group = je_group_internal_affairs
	
	on_complete = {

		every_country = {
			limit = {
				capital = {
					region = sr:region_switzerland
				}
				NOT = {this = ROOT}
			}
			save_scope_as = annex_scope
			ROOT = {
				annex = scope:annex_scope
			}
		}
	}
	
	complete = {


		custom_tooltip = {
			text = sonderbund_tt

			NOT = {
				any_country = {
					capital = {
						region = sr:region_switzerland
					}
					NOT = {
						OR = {
						this = c:API
						this = c:NTL
						this = ROOT
						}
					}
				}
			}
		}
	}


	

	


    should_be_pinned_by_default = yes
	weight = 20
}