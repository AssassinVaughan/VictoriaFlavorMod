je_trans_german_railway = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
    group = je_group_internal_affairs
	is_shown_when_inactive = {
		NOT = { has_global_variable = trans_german_done }
		OR = {
			country_has_primary_culture = cu:north_german
			country_has_primary_culture = cu:south_german
		}
		game_date < 1856.1.1
		OR = {
		    owns_entire_state_region = STATE_BRANDENBURG
			owns_entire_state_region = STATE_WESTPHALIA
			owns_entire_state_region = STATE_HESSE
		}
	}

	possible = {
		has_technology_researched = railways
	}
	
	immediate = {
		trigger_event = { id = journal_flavor_germany.101 }
	}

	complete = {
		any_scope_state = {
			state_region = s:STATE_BRANDENBURG
			has_building = building_railway
		}
		any_scope_state = {
			state_region = s:STATE_ANHALT
			has_building = building_railway
		}
		OR = {
			any_scope_state = {
				state_region = s:STATE_BRUNSWICK
				has_building = building_railway
			}
			any_scope_state = {
				state_region = s:STATE_ELBE
				has_building = building_railway
			}
		}
		OR = {
			any_scope_state = {
				state_region = s:STATE_WESTPHALIA
				has_building = building_railway
			}
			any_scope_state = {
				state_region = s:STATE_HESSE
				has_building = building_railway
			}
		}
		OR = {
			any_scope_state = {
				state_region = s:STATE_NORTH_RHINE
				has_building = building_railway
			}
			any_scope_state = {
				state_region = s:STATE_RHINELAND
				has_building = building_railway
			}
		}
	}
	
	fail = {
		game_date > 1856.1.1
	}

	on_complete = {
		set_global_variable = trans_german_done
		show_as_tooltip = {
			add_modifier = {
				name = generic_production_tech_research
				months = long_modifier_time
			}
		}
		trigger_event = { id = journal_flavor_germany.1 }
	}

	weight = 50
}

je_prussian_guard = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
    group = je_group_internal_affairs
	
	immediate = {
		set_variable = {
			name = pru_months_counter
			value = 0
		}
		trigger_event = { id = journal_flavor_germany.102 }
	}
	on_monthly_pulse = {
	    effect = {
	    if = { 
	    limit = {
	        ig:ig_armed_forces = {
			    OR = {
				    is_powerful = yes
				    is_in_government = yes
			    }
		    }
		    army_size >= 125
		    NOR = {
		    	any_scope_building = {
		    		is_building_type = building_barracks				
		    		OR = {
			    		building_has_goods_shortage = yes
		    			has_active_production_method = pm_no_organization
		    		}
		    	}
			    any_military_formation = {
			    	filter = {
			    		is_army = yes
			    	}
			    	any_combat_unit = {
			    	    OR = {
			    		has_unit_type = unit_type:combat_unit_type_irregular_infantry
			    		has_unit_type = unit_type:combat_unit_type_line_infantry
			    		}
			    	}
			    	percent >= 0.5
		    	}
	    	}
		}
		change_variable = {
			name = pru_months_counter
			add = 1
		}
		}
		}
	}
	
	
	complete = {
	    custom_tooltip = {
			text = je_prussian_guard_tt
			scope:journal_entry = { is_goal_complete = yes }
		}
	    ig:ig_armed_forces = {
		    OR = {
				is_powerful = yes
				is_in_government = yes
			}
		}
		army_size >= 125 #
		NOR = {
			any_scope_building = {
				is_building_type = building_barracks				
				OR = {
					building_has_goods_shortage = yes
					has_active_production_method = pm_no_organization
				}
			}
			any_military_formation = {
				filter = {
					is_army = yes
				}
				any_combat_unit = {
				    OR = {
					has_unit_type = unit_type:combat_unit_type_irregular_infantry
					has_unit_type = unit_type:combat_unit_type_line_infantry
					}
				}
				percent >= 0.5
			}
		}
	}

	on_complete = {
		show_as_tooltip = {
			add_modifier = {
				name = generic_military_tech_research
				months = long_modifier_time
			}
		}
		trigger_event = { id = journal_flavor_germany.2 }
	}
	
	timeout = 7000
	
	current_value = {
		value = var:pru_months_counter
	}
	goal_add_value = {
		add = 24
	}
	
	progressbar = yes

	weight = 50
}

je_establish_german_colonial_department = {
	icon = "gfx/interface/icons/event_icons/event_map.dds"
    group = je_group_foreign_affairs


	complete = {
		has_technology_researched = civilizing_mission
		flotilla_manpower > 10000
	}
	on_complete = {
		activate_law = law_type:law_colonial_exploitation
	}
	possible = {
		exists = c:GER
		this = c:GER
	}
	invalid = {
		has_law = law_type:law_colonial_exploitation
	}
	is_shown_when_inactive = {
		exists = c:GER
		this = c:GER
	}
}

je_the_zollverein = {
	icon = "gfx/interface/icons/event_icons/event_military.dds"
    group = je_group_internal_affairs
	is_shown_when_inactive = {
	    NOT = { has_global_variable = zollverein_done }
		OR = {
			country_has_primary_culture = cu:north_german
			country_has_primary_culture = cu:south_german
		}
		is_power_bloc_leader = yes
		game_date < 1870.1.1
		OR = {
		    owns_entire_state_region = STATE_BRANDENBURG
			owns_entire_state_region = STATE_WESTPHALIA
			owns_entire_state_region = STATE_HESSE
		}
	}
	
	# TODO: spawn events that represent opportunities or crisis among bloc members
	
	complete = {
        any_state = {
            filter = {
                OR = {
                    state_region = s:STATE_BRANDENBURG
                    state_region = s:STATE_WESTPHALIA
                    state_region = s:STATE_HESSE
                    state_region = s:STATE_HANNOVER
                    state_region = s:STATE_BRUNSWICK
                    state_region = s:STATE_ELBE
                    state_region = s:STATE_SCHLESWIG_HOLSTEIN
                    state_region = s:STATE_POMERANIA
                    state_region = s:STATE_MECKLENBURG
					state_region = s:STATE_WEST_PRUSSIA
                    state_region = s:STATE_ANHALT
                    state_region = s:STATE_SAXONY
					state_region = s:STATE_WESTPHALIA
					state_region = s:STATE_THURINGIA
					state_region = s:STATE_FRANCONIA
					state_region = s:STATE_BAVARIA
					state_region = s:STATE_RHINELAND
					state_region = s:STATE_NORTH_RHINE
					state_region = s:STATE_WURTTEMBERG
					state_region = s:STATE_BADEN
                }
            }
			custom_tooltip = {
				text = completely_owned_by_this_country_or_bloc_tt
				OR = {
					owner = ROOT
					owner = {
						is_subject_of = ROOT
					}
					owner = { is_in_customs_union_with = ROOT }
				}
				NOT = {
					this.state_region = {
						any_scope_state = {
							owner = {
								NOR = {
									this = ROOT
									is_subject_of = ROOT
									is_in_customs_union_with = ROOT
								}
							}
						}
					}
				}
			}
            percent >= 0.5
        }
	}
	
	invalid = {
		OR = {
			exists = c:GER
			exists = c:SGF
			exists = c:NGF
		}
    }
	
	on_complete = {
		set_global_variable = zollverein_done
		show_as_tooltip = {
			# TODO: give bonuses to random bloc member, give obligation from random members?
		}
		trigger_event = { id = journal_flavor_germany.3 }
	}

	weight = 50
}